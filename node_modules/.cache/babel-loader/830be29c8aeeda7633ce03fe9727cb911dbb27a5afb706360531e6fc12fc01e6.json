{"ast":null,"code":"import _regeneratorRuntime from\"/Users/avipatel/Documents/GA/Job Search/shyftlabs-dev-test/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/avipatel/Documents/GA/Job Search/shyftlabs-dev-test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/avipatel/Documents/GA/Job Search/shyftlabs-dev-test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{getStudents,createStudent}from'../../utils/student';import'./StudentsPage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function StudentsPage(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),firstName=_useState2[0],setFirstName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),familyName=_useState4[0],setFamilyName=_useState4[1];var _useState5=useState(Date(Date.now())),_useState6=_slicedToArray(_useState5,2),dateOfBirth=_useState6[0],setDateOfBirth=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),students=_useState8[0],setStudents=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];useEffect(function(){getAll();},[]);function getAll(){return _getAll.apply(this,arguments);}function _getAll(){_getAll=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var studentsAll;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getStudents();case 2:studentsAll=_context.sent;setStudents(studentsAll);console.log(studentsAll);case 5:case\"end\":return _context.stop();}},_callee);}));return _getAll.apply(this,arguments);}function handleChange(e){if(e.target.name===\"firstName\")setFirstName(e.target.value);if(e.target.name===\"familyName\")setFamilyName(e.target.value);if(e.target.name===\"dateOfBirth\")setDateOfBirth(e.target.value);}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var calculateAge,body;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:calculateAge=function _calculateAge(birthday){birthday=new Date(birthday);var ageDifMs=Date.now()-birthday;var ageDate=new Date(ageDifMs);return Math.abs(ageDate.getUTCFullYear()-1970);};e.preventDefault();if(firstName.length===0||familyName.length===0){setError(true);}if(!(firstName&&familyName&&calculateAge(dateOfBirth)>10)){_context2.next=9;break;}body={firstName:firstName,familyName:familyName,dateOfBirth:dateOfBirth};_context2.next=7;return createStudent(body).then(function(error){console.log(error);alert(\"New student has been added\");setFirstName(\"\");setFamilyName(\"\");setDateOfBirth(\"\");getAll();});case 7:_context2.next=10;break;case 9:if(firstName&&familyName&&dateOfBirth&&calculateAge(dateOfBirth)<10){setError(true);alert(\"Student must be at least 10 years old\");}case 10:case\"end\":return _context2.stop();}},_callee2);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Students Page\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"First name\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{name:\"firstName\",type:\"text\",value:firstName,autoComplete:\"off\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Family name\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{name:\"familyName\",type:\"text\",value:familyName,autoComplete:\"off\",onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date of birth\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{name:\"dateOfBirth\",type:\"date\",value:dateOfBirth,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"br\",{}),error?/*#__PURE__*/_jsx(\"label\",{children:\"All fields must be filled\"}):\"\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Submit\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Student\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Family Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date of Birth\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:students.map(function(s){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:s.firstName}),/*#__PURE__*/_jsx(\"td\",{children:s.familyName}),/*#__PURE__*/_jsx(\"td\",{children:s.dateOfBirth.slice(0,10)})]},s._id);})})]})})]});}","map":{"version":3,"names":["useState","useEffect","getStudents","createStudent","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StudentsPage","props","_useState","_useState2","_slicedToArray","firstName","setFirstName","_useState3","_useState4","familyName","setFamilyName","_useState5","Date","now","_useState6","dateOfBirth","setDateOfBirth","_useState7","_useState8","students","setStudents","_useState9","_useState10","error","setError","getAll","_getAll","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","studentsAll","wrap","_callee$","_context","prev","next","sent","console","log","stop","handleChange","e","target","name","value","handleSubmit","_x","_handleSubmit","_callee2","calculateAge","body","_callee2$","_context2","_calculateAge","birthday","ageDifMs","ageDate","Math","abs","getUTCFullYear","preventDefault","length","then","alert","children","type","autoComplete","onChange","required","onClick","className","map","s","slice","_id"],"sources":["/Users/avipatel/Documents/GA/Job Search/shyftlabs-dev-test/src/pages/StudentsPage/StudentsPage.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { getStudents, createStudent } from '../../utils/student';\n\nimport './StudentsPage.css'\n\nexport default function StudentsPage(props) {\n    const [firstName, setFirstName] = useState(\"\");\n    const [familyName, setFamilyName] = useState(\"\");\n    const [dateOfBirth, setDateOfBirth] = useState(Date(Date.now()));\n    const [students, setStudents] = useState([]);\n    const [error, setError] = useState(false);\n\n    useEffect(() => {\n        getAll()\n    }, [])\n        async function getAll() {\n            const studentsAll = await getStudents()\n            setStudents(studentsAll)\n            console.log(studentsAll)\n        \n    }\n\n    function handleChange(e) {\n    if (e.target.name === \"firstName\") setFirstName(e.target.value);\n    if (e.target.name === \"familyName\") setFamilyName(e.target.value);\n    if (e.target.name === \"dateOfBirth\") setDateOfBirth(e.target.value);\n}\n\nasync function handleSubmit(e) {\n    e.preventDefault()\n    if (firstName.length === 0 || familyName.length === 0) {\n      setError(true)\n    }\n\n\n    function calculateAge(birthday) {\n      birthday = new Date(birthday)\n      var ageDifMs = Date.now() - birthday;\n      var ageDate = new Date(ageDifMs);\n\n   \n      return Math.abs(ageDate.getUTCFullYear() - 1970);\n  }\n\n    if (firstName && familyName && calculateAge(dateOfBirth) > 10) {\n        let body = {\n            firstName: firstName,\n            familyName: familyName,\n            dateOfBirth: dateOfBirth,\n          };\n      await createStudent(body)\n      .then((error) => {\n        console.log(error)\n        alert(\"New student has been added\")\n        setFirstName(\"\")\n        setFamilyName(\"\")\n        setDateOfBirth(\"\")\n        getAll()\n    })\n      \n    } else if (firstName && familyName && dateOfBirth && calculateAge(dateOfBirth) < 10) {\n      setError(true);\n      alert(\"Student must be at least 10 years old\");\n    }\n  }\n  \n\n\n    return(\n        <>\n        <h1>Students Page</h1>\n        <hr />\n    <form>\n        <div>\n          <span>First name</span><br/>\n          <input name=\"firstName\" type=\"text\" value={firstName} autoComplete=\"off\" onChange={handleChange} required />\n        </div>\n\n        <div>\n          <span>Family name</span><br/>\n          <input name=\"familyName\" type=\"text\" value={familyName} autoComplete=\"off\" onChange={handleChange} required />\n        </div>\n          \n          <div>\n          <span>Date of birth</span><br/>\n          <input name=\"dateOfBirth\" type=\"date\" value={dateOfBirth} onChange={handleChange} required />\n          </div>\n          <br/>\n          {error ?\n          <label>All fields must be filled</label> : \"\"}\n          <br/>\n          <button onClick={handleSubmit}>Submit</button>\n    </form>\n    <div className='Student'>\n    <table className='table'>\n        <thead>\n            <tr>\n        <th>First Name</th>\n        <th>Family Name</th>\n        <th>Date of Birth</th>\n\n            </tr>\n        </thead>\n          <tbody>\n            {students.map((s) => {\n              return (\n                <tr key={s._id}>\n                  <td>{s.firstName}</td>\n                  <td>{s.familyName}</td>\n                  <td>{s.dateOfBirth.slice(0, 10)}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n    </table>\n</div>\n</>\n  )\n\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}